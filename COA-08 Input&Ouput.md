## 输入输出系统

### 输入输出（I/O）设备

#### 输入设备

​	定义：主要完成输入程序、数据和操作命令等功能的终端设备。

- 字符：键盘
- 图形、图像：鼠标、图形版、触摸屏、扫描仪、摄像头、二维码等
- 语音：麦克风

##### 键盘

功能：由一组排列成阵列形式的按键开关组成，每按下一个键，产生一个相应的字符代码，然后将它转换成ASCII码或其它码，送给主机。

##### 鼠标

功能：利用本身的**平面移动**来控制屏幕上的**光标移动**。

##### 触摸屏

功能：一种可接收触头等输入信号的感应式液晶显示装置，当接触了屏幕上的图形按钮时，屏幕上的**触觉反馈系统**可根据预先编程的程序驱动各种连接装置，并由液晶显示画面输出影音效果。

分类：**电阻式**、**电容式**、**红外线式**、**表面声波**和**底座式矢量压力测力**。

##### 摄像头

功能：通过摄像头摄取景物，经数字化后变成数字图像存入存储设备中。

##### 条形码

功能：将宽度不等的多个黑条和空白，按照一定的**编码**规则排列，用以表达一组**信息**的图形标识符。

分类：**线性条形码（一维条码）**、**矩阵条形码（二维码）**。



#### 输出设备

- **定义**：用于接受计算机数据，输出显示、打印、声音、控制外围设备等操作的终端设备。
- 图形、图像：显示器、打印机、绘图仪等。
- 语音：音箱、耳机。

##### 显示器

功能：将字符、图形、图像的**数字编码**转换为**光学信号**的显示设备。

分类：**阴极射线管（CRT）**、**平板显示器**（含液晶、等离子、场发射和电致发光显示器）

相关术语：

- 像素：图像中的一个最小单位（一个小方格，其状态可编码为一个数字序列）。

- 分辨率：显示屏能表示的像素个数。
- 灰度级：所显示像素点的亮暗差别。
- 刷新率：不断地重复扫描屏幕的刷新频率。
- 亮度：单位坎德拉每平方米（cd/m2）。
- 对比度：显示器画面上最大亮度和最小亮度的比值。

##### 打印机

功能：将信息的**数字编码**转换为字符、图形、图像等，并**打印**在纸上实现信息长期保存。

分类：**点阵针式打印机**、**激光打印机**、**喷墨打印机**、**热转印打印机**。



#### 汉字处理技术

输入：键盘、语音、手写、印刷体扫描识别。

存储：字、形分开存储。

内码：用于汉字信息的存储、交换和检索等的机内代码，一般用两个字节表示一个汉字。

字形码：用点阵表示汉字的输出形式，供显示器或打印机成像使用，一般用16×16等点阵。

输出：根据内码检索字形码输出到显示设备上。



### 输入输出（I/O）系统

#### 输入输出系统

任务：实现**外部设备**（输入输出设备和辅助存储器）与**主机**（CPU和主存）之间的信息交换，即I/O。

组成：**外部设备**和**控制部件**。从软硬件角度又可分为：

- 硬件：外设、I/O接口、总线、传送控制部件。
- 软件：实现I/O的传送控制（**何时传、如何传**）。

连接方式：有**分散连接**和**总线连接**两种。目前全部采用总线连接方式，需通过I/O接口连接。

性能：响应时间、吞吐率，I/O所占CPU时间（开销）。



#### 设备编址

任务：为了实现对I/O设备的寻址和选择，必须给每台设备规定地址码，称为设备代码。

方法：

- 统一编址：主存单元、I/O端口共用一个地址空间。

  CPU直接利用**访存指令**访问I/O端口

  【例】 `MOV AX， [1000] //1000可能为内存地址，也可能为I/O地址`

- 独立编址：主存单元、I/O端口都从零开始编址。 

  CPU需采用**专用指令**访问I/O设备

  【例】设置指令IN/OUT分别完成I/O的输入/输出操作，则下面汇编指令的含义为：

  `MOV AX,   [1000] //访问内存、1000为内存地址`

  `IN  AX,   [1000] //访问I/O设备、1000为I/O地址`

应用：ARM处理器采用统一编址、Intel处理器采用独立编址。 



#### 设备识别方法

需求：I/O接口应**主动识别**是否为操作的**目标从设备**。

操作对象：I/O设备、I/O端口（可与数据总线交换信息的寄存器）。

I/O端口地址的组成

- 外设链接：每个外设分配一个设备号、连接一个I/O接口（外设:I/O接口:I/O端口＝1:1:n ）。
- I/O接口的标识：通过所保存的设备号。
- I/O端口地址：<设备号，内部序号>。

设备选择电路：**监视**总线状态， **有I/O事务**时，**比较**总线上地址与所存设备号。



#### 联络方式

无条件传送方式：可**随时**进行数据传送，又称**同步传送方式。**

- 适用设备：简单设备，**都**为字符设备、并行设备。
- 联络方式：立即响应方式，无需联络信号线。

条件传送方式：先启动设备，等到设备**就绪时**，才能进行传送，又称**异步传送方式**。

- 适用设备：复杂设备，**可**为字符设备或块设备、并/串设备。

- 联络方式：指传送时数据间的定时方式。
  - 异步联络方式：设置请求/应答线，串行传输时**都**缺省。
  - 同步联络方式：设置时钟线，串行传输时**常**缺省。



#### I/O接口的功能

任务：主机-外设之间的连接电路，负责中转**数据/命令/状态**信息。

基本功能：

- 数据缓冲：用寄存器暂存来自主机或外设的**数据**。
- 操作中转：用寄存器暂存主机的**操作命令**，并适时**转发**。
- 状态监测：监视外设**工作状态**，并暂存到寄存器中。
- 通信控制：实现与主机、与外设的**通信**。
- 信号转换：实现主机-外设间的**信号转换**（含格式/电平/时序等）。



#### I/O接口的组成

组成：总线缓冲器、I/O端口、设备选择、控制逻辑等。

信息传送过程：分为主机-I/O端口操作（按总线标准）和I/O端口-外设操作（按设备传输协议）。



#### I/O接口的分类

按数据的传送方式分类：

- 并行接口：接口-外设之间同时传送**n位**数据。
- 接口-外设之间同时传送**1位**数据。

按功能的选择方式分类：

- 可编程接口：可**通过软件**选择接口的当前功能。
- 不可编程接口：须**通过硬连线**选择接口的当前功能。

按传送的控制方式分类（前三种方式是字、块传输的基础）

- 程序直接控制方式：**CPU**控制数据传送、状态查询。
- 程序中断传送方式：**CPU**控制数据传送、**I/O接口**实现状态报告。
- 直接存储器存取（DMA）方式：**I/O接口**控制数据传送、结束后**报告CPU**。
- I/O通道控制方式：在CPU和I/O接口之间增加I/O通道，**辅助**CPU管理控制外部设备。
- 外围处理机方式：**独立**于主机工作，可完成更完整的I/O操作。

以上传送控制方式从上到下**逐步解放CPU**。



#### I/O的传送控制（程序直接控制I/O⽅式）

基本原理：I/O完全**依靠程序**实现，又称程序控制I/O方式。

实现：CPU执行指令，在CPU-外设间、1个数据/次（适用于字符设备）。

分类：

- 程序查询方式：条件传送方式，又称为**轮询**（Polling）方式。
  - 传送控制原理：CPU启动设备后，不断地查询设备状态，当设备就绪时才进行数据传送。
  - I/O所占CPU时间：m个指令周期（从启动到传送的时延）/**数据**，CPU与外设串行工作。
- 直接传送方式：无条件传送方式。
  - 传送控制原理：CPU可随时进行数据传送，无需启动及查询。
  - I/O所占CPU时间：1个指令周期/**数据**。



#### I/O的传送控制（程序中断I/O⽅式）

基本原理：

1. CPU**启动**设备后，继续执行现行程序；
2. 设备准备**就绪**时，向CPU**提出**请求；
3. CPU**响应**请求，**传送**数据，**返回**现行程序。

实现：CPU执行指令，在CPU-外设间、1个数据/次（适用于字符设备）。

I/O所占CPU时间：k个指令周期（＝(响应＋中断服务程序)时延）/**数据**，CPU与外设**可并行**工作。



#### I/O的传送控制（DMA⽅式）

基本原理：

1. CPU**发送**传输需求，**启动**设备后，继续**执行**现行程序；
2. DMA接口**实现**数据传送（1批），结束时向CPU**提出**请求；
3. CPU**响应**请求，**处理**结束事宜，**返回**现行程序。

实现：DMA接口进行总线操作，在外设-主存间、1批数据/次（适用于块设备）。

I/O所占CPU时间：n个指令周期（＝(传送准备＋结束处理＋响应)时延）/**批数据**，CPU与外设**可并行**工作。



### 程序直接控制I/O方式

#### 程序查询方式的I/O控制流程

基本思想：

- CPU**启动**外设后，不断地**查询**外设状态；

- 当外设准备**就绪**时，才进行数据**传送**。

I/O控制流程：用I/O指令实现所有操作。

I/O所占CPU时间：开始查询→完成数据传送的所有时间。

程序查询方式的种类：

- 独占查询：启动设备后，**立即**开始查询状态、直到就绪。 常用于启动时间较**短**的外设I/O。
- 定时查询：启动设备后，**稍后**开始查询状态、直到就绪。 常用于启动时间较**长**的外设I/O。



#### 程序查询方式的I/O接口组织

I/O接口的组成：须设置**状态口**，含就绪位（或忙位）；条件传送方式还需设置**控制口**，含启动位。

工作过程：包括3种独立操作

- 启动设备操作：**完成**总线事务、**发送**命令到外设。
- 查询状态操作：**完成**总线事务（状态一直在检测）。
- 传送数据操作：**完成**总线事务、**发送**数据到外设。



#### 直接传送方式的I/O接口组织

I/O控制流程：CPU可**随时**进行数据传送，**无需**启动及查询。

I/O接口的组织：只有**数据口**，必是并行接口（串行均为条件传送）。

工作过程：只有1种操作

- 传送数据操作：**完成**总线事务、**发送/接收**数据到外设。

例题？



### 程序中断I/O方式

#### 程序中断方式的I/O控制流程

基本思想：

- CPU**启动**设备后，继续**执行**现行程序；
- 设备准备**就绪**时，向CPU**提出**请求；
- CPU**响应**请求，**传送**数据，**返回**现行程序。

I/O控制流程：中断**响应**->中断**处理**->中断**返回**（**响应**由硬件实现，**处理及返回**由软件实现）。

I/O所占CPU时间：响应时延＋中断程序执行时间。



#### 中断的类型

可屏蔽中断与不可屏蔽中断：基于请求的紧急程度。

- 可屏蔽中断MI：请求可以**暂不处理**（或稍后处理），例如键盘、打印机等设备的I/O请求。
- 不可屏蔽中断NMI：请求必须**立即处理**，例如电源故障、线路故障、存储校验错等硬件错误。

向量中断与非向量中断：基于响应的实现方法。

- 向量中断：通过软件在中断处理时**识别**事件类型、获得处理程序入口地址。
- 非向量中断：所有事件**共用**一个中断处理程序，不同事件的处理程序以函数形式存在。

单重中断与多重中断：基于处理过程能否重叠。

- 单重中断：中断处理过程中**不再**响应新的中断请求，当前中断处理结束后才能处理其他中断请求。
- 多重中断：中断处理过程中**可以**响应新的中断请求，暂停当前处理并转向执行新请求的中断程序。



#### 中断接口的组织

功能：基于查询接口，可产生/撤销中断请求、提供中断类型号(可无)。

I/O接口的组织：除常规部件，增设中断请求位INT、允许位EI，以及请求产生/撤销、中断响应电路。

工作过程：与**程序直接控制I/O方式**基本相同，不同之处在于：

- 中断请求产生：**触发**于启动设备操作，EI＝1、RD从0→1时。
- 中断响应操作：**响应**总线事务、**撤销**中断请求。
- 中断请求撤销：**触发**于**中断响应操作**或**读状态口**(非向量中断)。



#### 识别中断源（中断排队、中断判优）

任务：**选出**最紧急请求，**获得**其中断类型号（系统为中断源分配的唯一代码）、**撤销**该请求。

- 选出请求：与请求的连接方式有关。
-  获得类型号：与向量/非向量中断方式有关。

中断请求的连接方式

- 共用请求式：各中断源**共用**请求线。
- 独立请求式：各中断源请求线**独立**。



#### 中断源的判优方法

软件判优：适于共用/独立请求式连接、非向量中断。

- 判优原理：软件查询，查询次序→优先级(静态)。
- 获得类型号的方法：**无需**获得，用CALL指令直接转入。
- I/O接口的需求：**无需**响应电路，读状态口时撤销请求。

串行判优：适于共用请求式连接、向量中断。

- 判优原理：硬件自动轮询，查询次序→优先级(静态)。
- 获得类型号的方法：**中断源**给出。
- I/O接口的需求：需响应电路，**中断响应**时撤销请求。

并行判优：适于独立请求式连接、向量中断。

- 判优原理：硬件算法控制，算法→优先级(动态)。
- 获得类型号的方法：**中断机构**产生(常按请求连接次序)。
- I/O接口的需求：**无需**响应电路，**I/O操作时**撤销请求。



#### 中断控制器（Interrupt Controller）

本质：并行判优部件＋中断源 → 介于CPU和I/O接口之间。

基本功能：

1. **检测并记录**中断请求、向CPU**提出**中断请求。
2. **处理**中断响应操作(**提供**中断类型号、**复位**所选请求)。
3. **管理**处理过程中的请求(中断结束前**阻塞**低级请求) 。
4. **处理**I/O操作(如设置工作方式、修改优先级)



#### 多重中断处理

含义：中断处理过程中可以响应新的中断请求，新中断请求应比正在处理的中断请求优先级更高。

新请求检测：以中断控制器为例

- 中断请求的状态：正在服务（IS）、尚未服务（IR）。
- 新请求的产生条件：max(IRi优先级)＞max(ISj优先级)。
- 检测机构的组成：增设中断服务寄存器ISR、排队器(分类排队)。

保存部件的组织：用**后援寄存器**栈代替后援寄存器堆。



#### 中断系统（以向量中断方式为例）

基本组成

- 硬件：中断结构、I/O接口、中断控制器。
- IVT、各个中断处理程序。



### 直接存储器存期（DMA）I/O方式

#### 以“主存”为中心的硬件结构

目标：数据处理与数据传送（I/O）并行。

机制

- 数据传送无需CPU实现。
- 传送期间CPU可正常执行程序。

方案：外设-主存之间**直接**传送数据。



#### DMA方式

I/O的功能：主存-外设间、传送1批数据/次。

I/O对CPU的要求

- 负责传送准备及结束处理工作：如设置传送字数（批量）、主存首址、启动设备。
- 数据传送时让出总线使用权：DMA接口此时为主设备（平时为从设备）。

特征：传送不占CPU时间，传送速率为1个数据/总线周期。

I/O传送控制流程：**传送准备**、**结束处理**由软件实现，**数据传送**由硬件实现。



#### DMA的传送方式

含义：指DMA接口获得**总线使用权**的方法（从设备→主设备）。

分类：基于对总线使用权的管理方式

- CPU停止访问方式：DMA使用总线时CPU**暂停**需经过总线的一切访问。
- 周期挪用方式：CPU空闲时**让出**总线控制权给DMA（被动）。
- 总线使用权按**时间片**分配给CPU和DMA交替使用（主动）。



#### DMA的传送方式（CPU停止访问方式）

管理方法：

- DMA接口在**首个数据**准备传送时，**申请**总线使用权；
- DMA接口在**所有数据**传送结束时，**放弃**总线使用权。

特点：控制简单，传输效率高，CPU工作效率低。

应用：适于**外设速度≈主存速度**的场合。



#### DMA的传送方式（周期挪用方式）

管理方法：

- DMA接口在外设准备**就绪时**，请求总线使用权；
- DMA接口在**等待**外设准备时，放弃总线使用权。

特点：传输效率、CPU工作效率都高，控制略复杂。

应用：适用于**外设速度＜主存速度**的场合。

优先级：DMA请求的优先级应高于CPU请求，防止丢失数据（如磁盘）或工作紊乱。



#### DMA的传送方式（分时交替访问方式）

管理方法：总线使用权**定时地**轮流分配给CPU及DMA接口使用。

特点：无需请求-响应，传输效率、CPU工作效率均高。

应用：适于**CPU访存间隔＞主存周期×2**的场合(**很少使用**) 。

DMA传送方式的常见选择：DMA接口常**支持多种**传送方式，I/O时**选择适当**的传送方式。



#### DMA接口的功能与结构

基本功能：**DMA传送控制**（总线请求和传输、批量管理）＋**设备I/O接口**（常规功能、结束产生请求）。

基本结构：

- 设备I/O接口逻辑：中断式I/O接口。
- DMA传送控制逻辑：MAC及WC、总线控制、DMA控制（含请求）。



#### DMA的传送过程（含预处理、数据传送和后处理）

##### 预处理（DMA初始化）

- 任务：CPU使用I/O指令设置传送参数、启动外设。
- 设置传送参数：设置缓冲区首址、传送字数、传送方向及传送方式等。
- 启动外设：发送操作命令及参数 。

##### 数据传送（DMA传送）

- 任务：DMA接口**循环地**传送数据(一个字/次)，直至传送完毕。
-  申请总线使用权：申请时机与传送方式有关。
- 传送数据：操作命令与传送方向有关。
- 实现循环
  - MAC←(MAC)＋1、WC←(WC)－1
  - 若WC≠0，启动外设(开始下一字)，并转入①；若WC＝0，提出中断请求(已传送完毕)。

##### 后处理

任务：CPU**响应**中断请求，完成结束处理工作(如数据校验、开始下次) 。



#### DMA方式和中断方式的比较

相同点

- 与CPU的联络：都采用请求-响应方式。
- I/O过程：都由软硬件共同完成。

不同点

- **见ppt**



### 总线结构

#### 总线的概念

部件连接方式

- 分散连接：通信性能好（可同时通信），可扩展性差（引脚固定）。
- 总线连接：可扩展性好，通信性能略差（分时通信）。

总线：连接**多个设备**用于信息传输的一组**公共信号线**。



#### 总线的分类

##### 按信号线功能分类

- 数据总线：
  - 承载传送的数据，双向传输线。
  - **数据总线宽度**＝同时传送的二进制位数。
- 地址总线：
  - 指明目标部件（主存或外设）地址，单向传输线。
  - **地址总线宽度**＝log2(可寻址的地址个数)。
- 控制总线：
  - 控制传输过程（如何使用数据总线和地址总线），单向传输线。
  - 含**控制**信号线（主设备发出）、**状态**信号线（从设备发出）。

> **例如：CPU和主存的总线连接。**
>
> - 数据总线：CPU需要存取的数据；
> - 地址总线：存取数据所在的主存地址；
> - 控制总线：读、写命令（控制）、就绪、完成（状态） 时钟同步（控制）、总线请求、允许（状态）

##### 按连接部件分类

- 片内总线：用于连接芯片内部的元器件，只有数据线。
- 系统总线：用于连接计算机的主要部件(CPU/主存/外设)，有地址总线、数据总线、控制总线。
- 通信总线：用于连接外设或其它系统，有数据线[及控制线]（如RS-485、USB总线等）。

> 例如：通常一个计算机系统中会存在多种类型的总线，称为多总线结构。不同总 线之间通过总线桥进行互连。
>
> 思考：为什么需要多总线结构？



#### 总线的性能指标

- 总线宽度：指**数据总线**的位数，常用bit表示。

- 总线负载能力：指信号电平保持**在有效范围内**时，所能连接的设备数量，常用个表示。

- 总线带宽：指总线的**最大**数据传输率，常用Mbps(Mb/s)表示。

  - “最大”：不考虑非数据传输操作的时间，如地址传送、仲裁等。
  - 总线工作频率：数据传输次数/秒。
  - 通用的计算方法：数据传输率＝总线宽度×数据传输次数/秒。
  - 同步总线的计算方法： B ＝ w × (f / m)

  其中，w是总线宽度，f是总线时钟频率，m是没传一次数据所需要的时钟周期数。

> 例如：某32位同步总线的时钟频率为100MHz，每个时钟可传输一次数据，则 总线的带宽＝32bit×(100MHz/1)=3.2Gbps。
>
> 思考：若需将总线带宽提高一倍，有哪些方法？



#### 总线的操作过程

##### (1/3)

- 总线使用权：存在多个主设备时，需要经过**仲裁**确定总线使用权，常采用**请求-分配**方式。

- 总线事务：总线上一对设备间一次数据传输的所有操作。
- 总线操作：总线上完成一次数据传输的所有操作。
- 总线传输周期：一个**总线事务**的时间。
- 总线周期：完成一次**总线操作**的时间。

##### (2/3)

①请求及分配阶段：常称为仲裁阶段，确定总线使用权。

- 各个主设备：有操作需求时，发出**总线请求**信号BRi。
- 总线仲裁器：确定下个总线传输周期的总线使用权归属，向所选主设备发出**总线允许**信号BGj。

②寻址阶段：主、从设备识别阶段。

- 有总线使用权的主设备：发出目标**地址**和操作**命令**。
- 各个从设备：**判断**是否被选中，被选中时**响应**总线操作。

③传送数据阶段：主、从设备各自发送/接收**数据**。

④结束阶段：主、从设备各自**恢复**所控信号线状态（高阻）。

##### (3/3)

总线仲裁的时机：隐藏式仲裁。

- 方法：将总线仲裁和总线传输重叠，仲裁安排在**结束阶段**进行。
- 要求：总线仲裁器需**监视**总线状态（确定何时开始），且仲裁时延需**固定**（保证按时结束）。



#### 总线仲裁

缘由：当**多个主设备**同时申请使用总线时，需要确定主设备的使用总线的**优先级顺序**。

**集中式仲裁**：有统一的总线仲裁器。

- 链式查询方式：主设备采用链式连接。
- 计数器定时查询方式：计数器计数轮询主设备是否发起过总线请求。
- 独立请求方式：每个主设备请求-响应线与总线仲裁器独立连接。

**分布式仲裁**：无统一的总线仲裁器。

- 自举式：主设备用总线请求线表示优先级。
- 竞争式：主设备用仲裁号表示优先级。
- 冲突检测式：实时检测总线上的冲突并进行仲裁。

**性能指标**：等级性、公平性、响应速度。



#### 集中式仲裁

##### 链式查询方式（1/2）

- 基本思想：**自动轮询**各个主设备，被询问时可获得使用权。
- 仲裁线连接：信号线有**BR**（Bus Request）、**BS**（Bus State）、**BG**（Bus Grant）。
  - 总线使用权归属的表示：获得时BSi＝1，传输周期结束时应释放（BSi＝0）。
  - 仲裁线连接：BR＝∑BRi，BS＝∑BSi，（”线或“连接）BG(i+1)IN＝BGiOUT（链式连接（自动轮询））。

##### 链式查询方式（2/2）

- 仲裁时机：BS＝0、BR＝1时开始仲裁(使BG←1)，BS＝1(已确定)时**结束仲裁**(使BG←0)。

- 仲裁方法：**自动轮询**各主设备，主设备自行裁决，算法为**被询问**、**有请求时**获得使用权(使BSi＝1)。
- 仲裁实现：**仲裁器**BG＝BS(非)·BR；**主设备**BSi＝BGi_IN·BRi、BGi_OUT＝BGi_IN·BRi(非)。
- 特点：**静态**优先级策略，易产生**断链**现象。



##### 计数器定时查询方式

- 基本思想：**轮询**，避免链式查询的断链现象。
- 仲裁连接线：信号线有**BR、BS、设备号**（log2n根）。
- 仲裁时机：同链式查询方式，**开始时**使DevNo＝k(如0)，**结束时**使DevNo＝error(如1…1)。
- 仲裁方法：**定时轮询**各主设备，主设备自行裁决，算法为**DevNo=ID**、**有请求时**获得使用权(使BSi＝1)。
- 仲裁实现：**仲裁器**BS(非)·BR＝1时，每隔Δt使DevNo＝DevNo＋1；**主设备**BSi＝(DevNo==i)·BRi。
- 特点：**静态或循环**优先级策略(k＝0或i+1)，**无**断链现象。



##### 独立请求方式

- 基本思想：根据请求线的**连接次序**仲裁。
- 仲裁连接线：信号线有n对**BR**及**BG**(未使用BS线)。
- 仲裁时机：∑BRi＝1、总线空闲时**开始**，BGi＝1时**结束**。
- 仲裁方法：总线仲裁器**统一**裁决(不需要主设备参与)，裁决算法可为**任意**算法(使BGi＝1)。
- 仲裁实现：总线仲裁器内部电路实现(**时延固定**)。
- 特点：动态优先级策略，可实现**隐藏式**仲裁，但仲裁线多。

#### 总线传输协议

定义：指总线事务的操作及时序约定

传输操作

- 设备个数：一对一/一对多
- 操作类型：读/写/读改写

#### 同步定时方式

定时原理：由同意的**时钟信号**CLK实现，时长固定（CLK周期）

同步传输协议原理：各步骤都以CLK为基准。

应用特点：适合设备**速度相近、距离较短**的数据传输。



#### 异步定时方式

定时原理：通过联络信号的握手（应答）实现，时长可变。

- 定时过程：有①请求、②响应、③撤销请求、④撤销响应4个阶段。

- 定时应答方式：全互锁（主/从发后互等撤销）、半互锁（主发后等从发才撤销）、不互锁（不互等）。

异步传输协议原理：各步骤都采用异步定时方式。

应用特点：对设备速度、传输距离无要求，传输周期长（握手次数较多）。

### 外设接口

