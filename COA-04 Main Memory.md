## 存储系统概述

### 存储器

定义：计算机的一种具有记忆功能的部件，用以存放程序、数据、符号等信息。

存储内容

- 计算机当前运行时**现场要使用的信息**；
- 计算机当前运行时**暂时不需要使用**，但必须存储在计算机中的信息。

实现：现代计算机都配备有主存储器和辅助存储器。

- 主存储器（Memory）：简称主存（或内存），设在主机内部。用来存储计算机当前运行时现场要使用的信息；
- 辅助存储器（Storage）：简称辅存（或**外存**），设在主机外部。用来计算机当前运行时暂时不需要使用，但 必须存储在计算机中的信息 。

#### 现代计算机以“主存”为中心

- CPU需要：当前计算机正在执行的程序和数据（除了暂存于CPU寄存器以外的所有原始数据、中间 结果和最后结果）均存放在主存中。**CPU直接从主存取指令或存取数据**。
- I/O需要：计算机系统中输入输出设备数量增多，数据传送速度加快，因此采用了**直接存储器存取 （DMA）**技术和**输入输出通道**技术，在存储器与输入输出系统之间直接传送数据。
- 并行计算：共享存储器的多处理机的出现，**利用存储器存放共享数据**，并实现处理机之间的 通信，更加强了存储器作为全机中心的作用。

#### 主存与CPU

- 工作机制：计算机执行程序时，CPU从存储器中提取程序（**从主存提取程序，而存放在外存的程序、 数据只有调入主存后才能被CPU提取执行**），按程序的指令控制计算机的执行，对存储器中的数据进行相应的处理，或者CPU控制将存储器中的数据输出。
- 影响关系：**CPU是高速部件，而主存的读写速度相比则慢得多**。因此，计算机指令的执行速度在很 大程度上依赖于主存的读写速度（**木桶效应**）。到目前为止，存储设备的速度，仍然
  明显慢于同期同级别的CPU速度。

#### 存储器（系统）中的关键问题

- 现实问题：存储系统是整个计算机系统的性能瓶颈。
- 关键因素：速度、容量、价格（三者存在制约关系）。
- 解决方案：为解决三者间的矛盾，目前通常采用**多级存储体系结构**，即使用高速缓冲存储器、主 存储器和辅助存储器。

**详细内容在第七章展开。**

#### 主存储器的分类

- 随机存储器（Random Access Memory，RAM）：又称可读写存储器。
  - SRAM：静态存储器；
  - DRAM：动态存储器。
- 只读存储器（Read Only Memory，ROM）：又称非易失性存储器（断电后信息不会丢失）。
  - PROM：可编程序的只读存储器；
  - EPROM：可擦除可编程序只读存储器；
  - E2PROM：可用电擦除的可编程序只读存储器；
  - Flash Memory: 快闪存储器(可以整块擦除，也可局部擦除)。

#### 主存储器的主要技术指标为：容量、存取时间、存储周期

容量：主存储器**存储单元的总数**。

- 存储字：计算机**可寻址的最小单位**，一个存储字所包括的二进制位数称为**字长**。
- 字节（Byte）：8个二进制位（bit）。一个字可以由若干字节组成，以字或字节为单位来表示主存 储器存储单元的总数，就得到主存储器的容量。（单位：b、B、KB、MB、GB、…）

存取速度：常用存取时间、存储周期

- 存取时间（Memory Access Time）：启动**一次存储器操作**到完成该操作所经历的时间。
- 存储周期（Memory Cycle Time）：连续启动**两次独立的存储器操作**（例如连读两次读操作）所需 间隔的最小时间。

#### 主存储器的基本操作

操作：存储器 -> CPU

- CPU把信息字的地址送到AR，经地址总线送往主存储器；
- CPU发读（Read）命令；
- CPU等待主存储器的Ready回答信号，Ready=1表示信息已 读出，经数据总线送入DR。

写操作：CPU -> 存储器

- CPU把信息字的地址送到AR，经地址总线送往主存储器， 并将信息字送往DR；
- CPU发读（Write）命令；
- CPU等待主存储器的Ready回答信号，Ready=1表示信息已 从DR经数据总线写入主存储器。

#### 存储体

概念：信息的储存地，是主存储器的主体。

组成：存储体的核心是存储阵列，由排列成矩阵的若干**存储元**组成。

- **存储元**：存储体的基本记忆单元，**相当于一个触发器**，存放一个二进制数据（0/1）。

- 存储单元：若干个**并行工作**的存储元组成一个**可寻址的最小单位**（存储字）。

- 存储阵列：若干个存储元排成的**阵列**。

#### 存储体寻址

工作特性

- 不同存储单元相互平等而独立；
- 同一存储单元的每个二进制位**并行工作**，同时读出或写入。

寻址过程

- 字选线：经过地址译码后的输出线，每一根**字选线**负责驱动 一个**存储单元**。
- 位线：对外交换信息的通路，用于读/写存储元的状态，每 一位都有一条数据线。
- 过程：**字线选中，位线读写**。（读写操作时，同一根字选线 控制的w个存储元同时被驱动）

***存储器字长4位，每个存储单元连有4组位线，但所有存储单元对应位的位线是 公用 的，所以只有4条位线与数据总线
相通。**

## 半导体存储器基础

计算机系统的**主存和各种外部设备的缓存**，都是由半导体存储器担任。

### 随机存储器（Random Access Memory, RAM）

概念：通过指令可以**随机地、个别地**对各个存储单元进行访问的存储器。

分类（根据存储元件在运行中能否长时间保存信息）

- 静态存储器（Static RAM, SRAM）：用**触发器**存储信息，信息可保持不变。
- 动态存储器（Dynamic RAM, DRAM）：用**电容**存储信息，信息会**缓慢改变**，需**及时刷新**。

#### 静态存储器（Static RAM, SRAM）

特性：用触发器存储信息，信息可保持不变。

存储矩阵：由所有存储单元组成

- 排列方式：一维、二维，常为正方形（连线最短）。

地址译码器：与排列方式对应

- 二维译码：分为X和Y方向。

控制电路：根据外部引脚信号产生内部读写信号。

读写电路：根据内部的读/写信号，检测控制位控门。

驱动器

- 同一行的存储元共用字选线，需增加驱动能力；
- SRAM数据传送到所有连接部件，需要增加驱动能力。

#### 动态存储器（Dynamic RAM, DRAM）

特性：用电容存储信息，信息会缓慢改变，需及时刷新。

存储原理：无放电回路时，电容中的电荷可以保持。

读操作：电容C~S~有无电荷表示1/0状态

刷新操作：C~S~电荷会缓慢泄漏，因此需要刷新，过程同读操作，但不输出数据。

#### DRAM芯片的地址复用

缘由：大规模集成电路的发展使得芯片集成度越来越高，地址线也随之增加。

方案

- 增设行地址选通控制信号RAS和列地址选通控制信号CAS，将地址码两次送入结构；
- 存储芯片外部增设2:1行列多路器。

#### DRAM芯片的刷新

待完善

## 存储器的组成与控制

掌握字位扩展。